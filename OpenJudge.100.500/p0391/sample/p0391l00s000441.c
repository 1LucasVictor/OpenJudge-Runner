#include <stdio.h>
#include <string.h>

int main(void)
{
	char str[1000];	//????????????????????\??????
	char rev[1000];	//reverse??¨??????????????\??????
	char p[100];	//??\???????????????????????\??????
	char ordr[8];	//??????????????\??????
	int num = 0;	//???????????°
	int a = 0;		//??°?????????
	int b = 0;		//??°?????????

	int i = 0;		//??°?????????????????¨
	int j = 0;		//??°?????????????????¨
	int k = 0;		//??°?????????????????¨

	/* ???????????????	*/
	for(i = 0; i < 1000; i++)
	{
		str[i] = 0;
	}

	for(i = 0; i < 100; i++)
	{
		p[i] = 0;
	}

	for(i = 0; i < 8; i++)
	{
		ordr[i] = 0;
	}

	
	scanf("%s", str);						/* ???????????????		*/
	scanf("%d", &num);						/* ???????????°??\???		*/
	
	for(i = 0; i < num; i++)
	{
		/* ??????????????????p??¨ordr????????????0??\??? */
		for(j = 0; j < 1000; j++)
			{
				p[j] = 0;
			}
		for(j = 0; j < 8; j++)
		{
			ordr[j] = 0;
		}
		for(j = 0; j < 1000; j++)
		{
			rev[j] = 0;
		}
		
		scanf("%s %d %d", ordr, &a, &b);		/* ??????????????°???		*/

		if(strcmp(ordr, "print") == 0)
		{
			for(j = a; j < b + 1; j++)
			{
				printf("%c", str[j]);
			}
		}
		else if(strcmp(ordr, "reverse") == 0)
		{
			k = 0;
			for(j = b; j >= a; j--)
			{
				rev[k] =  str[j];
				k++;
			}
			k = 0;
			for(j = a; j <= b; j++)
			{
				str[j] = rev[k];
				k ++;
			}
		}
		else if(strcmp(ordr, "replace") == 0)
		{
			scanf("%s", p);				/* ???????????\???	*/
			k = 0;
			for(j = a; j <= b; j++)
			{
				str[j] = p[k];
				k++;
			}
		}
		else
		{
			/* NOP	*/
		}
	}
	
	printf("\n");

	return 0;
}