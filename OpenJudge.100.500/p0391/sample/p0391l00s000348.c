/* ITP1_9_D */
#include <stdio.h>
#include <string.h>

#define MAX_LENGTH 1001
#define ORDER_LENGTH 8

/* ?????????????????? */
typedef enum {
	PRINT = 0,
	REVERSE,
	REPLACE
} order_type;

/* ????????????????????????????????¢??° */
void init_char_array(char array[], short length);
/* ??????????????????????????? */
order_type get_order_type(char order_array[]);
/* ?????????????????¨??¨???????????¢??° */
void print(char ch_array[], short start_pos, short end_pos);
/* ?????????????????¨???????????\??????????????¢??° */
void reverse(char ch_array[], short start_pos, short end_pos);
/* ?????????????????¨?????????????????¢??° */
void replace(char ch_array[], short start_pos, short end_pos, char rep_array[]);

int main(void)
{
	char input_ch[MAX_LENGTH];
	init_char_array(input_ch, MAX_LENGTH);
	scanf("%s", input_ch);
	
	short order_cnt = 0;
	scanf("%hd", &order_cnt);
	
	char order_ch[ORDER_LENGTH];
	order_type type = PRINT;
	short start_pos = 0, end_pos = 0;
	char replace_ch[MAX_LENGTH];
	
	short ii;
	for( ii = 0; ii < order_cnt; ii++ )
	{
		init_char_array(order_ch, ORDER_LENGTH);
		start_pos = 0;
		end_pos = 0;
		
		// ????????????????§?????´??????????????´??????????
		scanf("%s %hd %hd", order_ch, &start_pos, &end_pos);
		
		// ??????????¨?????????????
		type = get_order_type(order_ch);
		
		// ??????????¨??????????????????????????????????
		switch( type )
		{
		case PRINT:		// ?????¢??¨???
			print(input_ch, start_pos, end_pos);
			break;
		case REVERSE:	// ??????????????????
			reverse(input_ch, start_pos, end_pos);
			break;
		case REPLACE:	// ?????????????????????
			init_char_array(replace_ch, MAX_LENGTH);
			scanf("%s", replace_ch);
			replace(input_ch, start_pos, end_pos, replace_ch);
			break;
		}
	}
	return 0;
}

/* ????????????????????????????????¢??° */
void init_char_array(char array[], short length)
{
	short ii;
	for( ii = 0; ii < length; ii++ )
	{
		array[ii] = '\0';
	}
}

/* ??????????????????????????? */
order_type get_order_type(char order_array[])
{
	order_type type = PRINT;

	if( 0 == strcmp(order_array, "print"))
	{
		type = PRINT;
	}
	else if( 0 == strcmp(order_array, "reverse"))
	{
		type = REVERSE;
	}
	else if( 0 == strcmp(order_array, "replace"))
	{
		type = REPLACE;
	}

	return type;
}

/* ?????????????????¨??¨???????????¢??° */
void print(char ch_array[], short start_pos, short end_pos)
{
	short ii;
	for( ii = start_pos; ii <= end_pos; ii++ )
	{
		printf("%c", ch_array[ii]);
	}
	printf("\n");
}

/* ?????????????????¨???????????\??????????????¢??° */
void reverse(char ch_array[], short start_pos, short end_pos)
{
	short temp_len = end_pos - start_pos;
	char temp[temp_len];
	init_char_array(temp, temp_len);
	
	short ii, temp_idx = 0;
	for( ii = end_pos; ii >= start_pos; ii-- )
	{
		temp[temp_idx++] = ch_array[ii];
	}
	
	temp_idx = 0;
	for( ii = start_pos; ii <= end_pos; ii++ )
	{
		ch_array[ii] = temp[temp_idx++];
	}
}

/* ?????????????????¨?????????????????¢??° */
void replace(char ch_array[], short start_pos, short end_pos, char rep_array[])
{
	short ii, rep_idx = 0;
	for( ii = start_pos; ii <= end_pos; ii++ )
	{
		ch_array[ii] = rep_array[rep_idx++];
	}
}